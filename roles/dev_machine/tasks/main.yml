- name: Adds PPAS for package installation
  apt_repository: repo={{ item }} update-cache=yes
  with_items:
            - ppa:cassou/emacs
            - ppa:satyajit-happy/themes
            - ppa:numix/ppa
            - ppa:hvr/ghc
  sudo: yes
  
- name: Install necessary packages
  apt: pkg={{ item }} state=latest
  with_items:
            - firefox
            - openssh-server
            - terminator
            - python-pip
            - alien
            - dpkg-dev
            - debhelper
            - build-essential
            - libreoffice
            - gnome-tweak-tool
            - git
            - git-core
            - meld
            - nginx
            - emacs24
            - emacs24-el
            - emacs24-common-non-dfsg
            - smbclient
            - curl
            - libcurl3
            - shimmer-themes
            - shimmer-wallpapers
            - numix-gtk-theme
            - numix-icon-theme
            - numix-icon-theme-circle
            - numix-wallpaper-mr-numix
            - gnome-shell-extensions
            - gnome-shell-theme-elegance-colors
            - wget
            - flashplugin-installer
            - software-properties-common
            - cabal-install-1.20
            - ghc-7.8.4 happy-1.19.4 alex.3.1.3
  sudo: yes
  
# ## Can make this better by using vars
- name: Git setup
  copy: src=.gitconfig dest=/home/nerraw/

- name: GHC config
  copy: src=.ghc dest=/home/nerraw/
  
- name: Setup numix theme
  command: gsettings set org.gnome.desktop.interface gtk-theme "Numix"
  command: gsettings set org.gnome.desktop.wm.preferences theme "Numix"
  command: gsettings set org.gnome.desktop.background picture-uri "file:///usr/share/backgrounds/Mr-Numix-16x9.png"
  command: gsettings set org.gnome.desktop.interface icon-theme "Numix-Circle"

- name: Setup Elegance Colors
  command: mkdir -p /home/nerraw/.config/elegance-colors

- name: Install Elegance Colors Config
  copy: src=elegance-colors.ini dest=/home/nerraw/.config/elegance-colors/

- name: Make .emacs directory
  command: mkdir -p /home/nerraw/.emacs.d/

- name: Copy .emacs file
  copy: src=init.el dest=/home/nerraw/.emacs.d/

- name: Make Terminator config directory
  command: mkdir -p /home/nerraw/.config/terminator/

- name: Copy Terminator config
  copy: src=config dest=/home/nerraw/.config/terminator/

- name: Add .bashrc configs
  lineinfile:
    dest=~/.bashrc
    insertafter="{{ item.lineafter }}"
    line="{{ item.line }}"
    with_items:
      - { lineafter: '^export BASH_CONF.*$', line: 'export TERM=xterm-color' }
      - { lineafter: '^export BASH_CONF.*$', line: 'PROMPT_DIRTRIM=3' }

- name: Add Haskell Paths
  lineinfile:
    dest=~/.bashrc
    insertafter=EOF
    line="export PATH=$PATH:~/.cabal/bin:/opt/cabal/1.20/bin:/opt/ghc/7.8.4/bin:/opt/happy/1.19.4/bin:/opt/alex/3.1.3/bin"

- name: Get Go tar
  get_url: url=https://storage.googleapis.com/golang/go{{ go_version }}.linux-amd64.tar.gz dest=/tmp

- name: Install GO
  command: tar -C /usr/local -xzf /tmp/go{{ go_version }}.linux-amd64.tar.gz
  sudo: yes
  
- name: Add GOPATHS
  lineinfile:
    dest={{ item.file }}
    insertafter=EOF
    line={{ item.line }}
    with_items:
      - { file: '/etc/profile', line: 'export $PATH:/usr/local/go' }
      - { file: '~/.bashrc', line: 'export PATH=$PATH:$HOME/go' }
          
- name: Remove extra PS1 Line from .bashrc
  lineinfile:
    dest=~/.bashrc
    state=absent
    regexp="PS1=.*\$PS1\""

      




  
